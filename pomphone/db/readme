CREATE TABLE sale_returns (
    id INT AUTO_INCREMENT PRIMARY KEY,
    original_sale_id INT NOT NULL,
    employee_id INT NOT NULL,
    return_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    reason TEXT NOT NULL,
    total_refund DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (original_sale_id) REFERENCES sale(id),
    FOREIGN KEY (employee_id) REFERENCES employee_account(em_id)
);


CREATE TABLE sale_return_items (
    id INT AUTO_INCREMENT PRIMARY KEY,
    return_id INT NOT NULL,
    sale_item_id INT NOT NULL,
    product_id INT NOT NULL,
    imei VARCHAR(100),
    qty INT DEFAULT 1,
    price DECIMAL(10,2) NOT NULL,
    discount DECIMAL(10,2) DEFAULT 0,
    refund_amount DECIMAL(10,2) NOT NULL,
    FOREIGN KEY (return_id) REFERENCES sale_returns(id),
    FOREIGN KEY (sale_item_id) REFERENCES sale_items(id)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;
